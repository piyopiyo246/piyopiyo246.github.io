YUI.add("nav-selecta-transjax",function(a){a.transjax.add("nav-selecta",{search_on_flickr:"Search <strong>Everyone's Uploads</strong>",search_more:"More search types...</strong>",jump_to_the_search_field:"Jump to the search field",search_photostream:"<strong>Your Photostream</strong>",search_users_photostream:"<strong>%s Photostream</strong>",search_favorites:"<strong>Your Favorites</strong>",search_users_favorites:"<strong>%s Favorites</strong>",search_contacts:"<strong>Your Contacts' Photos</strong>",search_people:"<strong>Flickr Members</strong>",search_tags:"<strong>Tags</strong>",search_groups:"<strong>Groups</strong>",search_group:"<strong>This Group</strong>",search_location:"<strong>Places</strong>",search_apps:"<strong>Apps</strong>",search_help:"<strong>The Help Forum</strong>",search_advanced:"<strong>Advanced Search</strong>",section_your_photostream:'Your Photostream',section_your_sets:'Your Sets',section_your_collections:'Your Collections',section_your_galleries:'Your Galleries',section_your_archives:'Your Archives',section_your_tags:'Your Tags',section_your_map:'Your Map',section_your_favorites:'Your Favorites',section_your_stats:'Your Stats',section_your_apps:'Your Apps',section_recent_activity:'Recent Activity',section_photos_of_you:'Photos of You',section_upload_photos:'Upload Photos',section_your_account:'Your Account',section_your_profile:'Your Profile',section_flickrmail:'FlickrMail',section_organize_and_create:'Organize & Create',section_prints_and_photo_products:'Prints &amp; photo products',section_contacts:"Contacts' Recent Uploads",section_photos_of_your_contacts:'Photos of Your Contacts',section_contact_list:'Contact List',section_find_your_friends:'Find Your Friends',section_invite_your_friends:'Invite your Friends',section_invite_history:'Invite History',section_guest_pass_history:'Guest Pass History',section_your_groups:'Your Groups',section_recent_changes_in_your_groups:'Recent Changes in Your Groups',section_create_a_new_group:'Create a New Group',section_the_tour:'The Tour',section_explore:'Explore',section_last_7_days_interesting:'Last 7 Days Interesting',section_popular_tags:'Popular Tags',section_calendar:'Calendar',section_most_recent_uploads_to_flickr:'Most Recent Uploads to Flickr',section_video_on_flickr:'Video on Flickr',section_galleries:'Galleries',section_explore_analog:'Explore Analog',section_flickr_clock:'Flickr Clock',section_world_map:'World Map',section_places:'',section_the_commons:'The Commons',section_creative_commons:'Creative Commons',section_flickrblog:'FlickrBlog',section_getty_images:"Getty Images",section_code_flickr:"code.flickr",section_the_app_garden:'The App Garden',section_camera_finder:'Camera Finder',section_developer_guidelines:'Developer Guide',section_api_docs:'API Documentation',section_feeds:'Feeds',section_help:'Help',section_community_guidelines:'Community Guidelines',section_the_help_forum:'The Help Forum',section_faq:'FAQ',section_tools:'Tools',section_sitemap:'Sitemap',section_about_flickr:'About Flickr',section_jobs:'Jobs at Flickr',section_terms_of_service:'Terms of Service',section_terms_of_use:'Terms of Use',section_your_privacy:'Your Privacy',section_copyright_ip_policy:'Copyright/IP Policy',section_report_abuse:'Report Abuse',section_mobile:'Mobile',section_photosession:'Photo Session',section_alias_graphs:'Graphs',section_alias_referrers:'Referrers',section_alias_views:'Views',section_alias_settings:'Settings',section_alias_preferences:'Preferences',section_alias_batch:'Batch',section_alias_prints:'Prints',section_alias_calendar:'Calendar',section_alias_book:'Book',section_alias_film:'Film',section_alias_license:'License',section_alias_buy:'Buy',section_alias_sell:'Sell',section_alias_developer:'Developer',section_alias_programming:'Programming',section_alias_code:'Code',section_alias_documentation:'Documentation',section_alias_career:'Career',section_alias_work:'Work',section_alias_staff:'Staff',section_alias_upload:'Upload',section_alias_plugin:'Plug-in',section_alias_:'',section_alias_:'',section_alias_:'',section_alias_:'',section_alias_:'',section_alias_:'',section_alias_:''})},"0.0.1",{requires:F.config.modules["nav-selecta-transjax"].requires||[]});YUI.add("nav-selecta",function(a){var f=false;a.on("keydown",function(k){if(k.metaKey||k.ctrlKey){f=true}});a.on("keyup",function(k){if(f){f=false}});a.NavSelecta=function(q,m){m=m||{};m.showSubtitle=(typeof m.showSubtitle!=="undefined")?m.showSubtitle:true;m.showIcon=(typeof m.showIcon!=="undefined")?m.showIcon:true;m.maxResultsDisplayed=m.maxResultsDisplayed||15;m.searchOnRealname=(typeof m.searchOnRealname!=="undefined")?m.searchOnRealname:true;m.searchOnEmail=(typeof m.searchOnEmail!=="undefined")?m.searchOnEmail:true;m.searchOnPathAlias=(typeof m.searchOnPathAlias!=="undefined")?m.searchOnPathAlias:true;m.selectFirstItem=(typeof m.selectFirstItem!=="undefined")?m.selectFirstItem:true;m.loadTransparently=(typeof m.loadTransparently!=="undefined")?m.loadTransparently:true;m.allowFormSubmit=(typeof m.allowFormSubmit!=="undefined")?m.allowFormSubmit:true;m.minListWidth=m.minListWidth||(F.config.flickr.flags.enable_global_nav?241:266);a.NavSelecta.superclass.constructor.call(this,q,m);this.inputField.removeClass("grey");this.maxContactsDisplayed=m.maxContactsDisplayed||3;this.maxSectionsDisplayed=m.maxSectionsDisplayed||3;this.on("BoSelecta:resultSelect",e);this.on("BoSelecta:resultClick",e);if(a.config.flickr.user&&a.config.flickr.user.nsid){this.inputField.once("mouseover",this.fetchData,this,true);this.inputField.once("focus",this.fetchData,this,true);this.on("BoSelecta:dataFetchComplete",this.refreshResults,this,true)}this.container.addClass("nav-selecta");var l=this.autoComp.get("listNode").ancestor(".yui3-aclist-content"),o="search-menu-hover";function n(t,s){if(this._hover_hide_timeout){this._hover_hide_timeout.cancel()}}function p(t,s){n(t,s);this._hover_hide_timeout=a.later(1000,this,function(){a.fire("flickr-menus:hide",s);this._hover_hide_timeout=null})}function r(t,s){t.target.addClass("search-menu-hover");n(t,s)}function k(t,s){t.target.removeClass("search-menu-hover");p(t,s)}l.on("mouseover",r,this);l.on("mouseout",k,this);this.container.on("mouseover",r,this,"source:nav-selecta-container");this.container.on("mouseout",k,this,"source:nav-selecta-container");this.container.on("keyup",function(s){if(!s.target.hasClass("search-menu-hover")){k.apply(this,arguments)}},this);a.keyboardShortcutManager.register({keystring:"83",handler:d,context:"",scope:this,legend:{key:"S",description:a.transjax.get("nav-selecta","jump_to_the_search_field"),group:a.transjax.get("keyboard-shortcut-legend","navigation"),order:99}});this.addSections(a.config.flickr.nav_selecta.additional_sections)};var c={},i={};function e(l,k){if(l.type==="contact"){if(!f){g("/photos/"+(l.a?l.a:l.n)+"/")}}else{if(l.type==="section"){if(!f){g(l.url)}}else{if(!f){g(l.url)}}}}function d(k){k.preventDefault();window.scrollTo(0,0);this.inputField.focus()}function g(k){a.rapidTracker.beacon("Search-search_icon");a.fire("NavSelecta:beforeNavigatingAway",k);window.location=k}function b(n){var p=location.search.split("?")[1]||null;if(p){var m=p.split("&"),s=n.split("&"),o=null,k={},l=null,r=null,q="";for(l=0;s.length>l;l++){o=s[l].split("=");k[o[0]]=o[1]}for(l=0;m.length>l;l++){o=m[l].split("=");if(!o[0].match(/^[a-zA-Z][a-zA-Z0-9]*/)){continue}if(k[o[0]]){r=k[o[0]];k[o[0]]=null}else{r=o[1]}q+=o[0]+"="+a.StringFilters.escape_entities(r)+"&"}for(l in k){if(k[l]){q+=l+"="+k[l]+"&"}}return q.substring(0,q.length-1)}else{return n}}c._searchContacts=function(q){var J,l=[],z=q,s,u=this,t=false,I=false,A=false,H=false,x=false;l.push({type:"search",message:a.transjax.get("nav-selecta","search_on_flickr",'<em class="term-highlight">'+z+"</em>"),onclick:function(m){if(!f){g("/search/?"+b("q="+encodeURIComponent(z)))}},url:"/search/?"+b("q="+encodeURIComponent(z))});if(a.config.flickr.nav_selecta.photostream_search_user){if(a.config.flickr.user&&a.config.flickr.user.nsid&&a.config.flickr.user.nsid===a.config.flickr.nav_selecta.photostream_search_user.nsid){l.push({type:"search-photostream",message:a.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w="+a.config.flickr.user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w="+a.config.flickr.user.nsid+"&q="+encodeURIComponent(z))});t=true}else{l.push({type:"search-users-photostream",message:a.transjax.get("nav-selecta","search_users_photostream",a.StringFilters.escape_entities(a.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w="+a.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w="+a.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(z))});I=true}}if(a.config.flickr.nav_selecta.favorites_search_user){if(a.config.flickr.user&&a.config.flickr.user.nsid&&a.config.flickr.user.nsid===a.config.flickr.nav_selecta.favorites_search_user.nsid){l.push({type:"search-favorites",message:a.transjax.get("nav-selecta","search_favorites",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w=faves&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w=faves&q="+encodeURIComponent(z))});A=true}else{l.push({type:"search-users-favorites",message:a.transjax.get("nav-selecta","search_users_favorites",a.StringFilters.escape_entities(a.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w=faves-"+a.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w=faves-"+a.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(z))});H=true}}if(a.config.flickr.nav_selecta.search_group&&a.config.flickr.nav_selecta.search_group.nsid){l.push({type:"search-group",message:a.transjax.get("nav-selecta","search_group",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/groups/?"+b("w="+encodeURIComponent(a.config.flickr.nav_selecta.search_group.nsid)+"&m=pool&q="+encodeURIComponent(z)))}},url:"/search/groups/?"+b("w="+encodeURIComponent(a.config.flickr.nav_selecta.search_group.nsid)+"&m=pool&q="+encodeURIComponent(z))});x=true}if(!this.showMoreSearches&&!a.config.flickr.nav_selecta.search_view){l.push({type:"search-more",message:a.transjax.get("nav-selecta","search_more",'<em class="term-highlight">'+z+"</em>"),onclick:function(){u.showMoreSearches=true;u.selectSecondItem=u.autoComp.after("results",function(m){if(t||I||A||H||x){u.autoComp.set("activeItem",u.autoComp._getFirstItemNode().next().next())}else{u.autoComp.set("activeItem",u.autoComp._getFirstItemNode().next())}u.selectSecondItem.detach()});u.refreshResults()}})}else{if(a.config.flickr.user&&a.config.flickr.user.nsid&&!t){l.push({type:"search-photostream",message:a.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w="+a.config.flickr.user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w="+a.config.flickr.user.nsid+"&q="+encodeURIComponent(z))})}if(a.config.flickr.nav_selecta.photostream_search_user&&(!a.config.flickr.user||(a.config.flickr.user.nsid!==a.config.flickr.nav_selecta.photostream_search_user.nsid))&&!I){l.push({type:"search-users-photostream",message:a.transjax.get("nav-selecta","search_users_photostream",a.StringFilters.escape_entities(a.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w="+a.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w="+a.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(z))})}if(a.config.flickr.nav_selecta.favorites_search_user&&(!a.config.flickr.user||(a.config.flickr.user.nsid!==a.config.flickr.nav_selecta.favorites_search_user.nsid))&&!H){l.push({type:"search-users-favorites",message:a.transjax.get("nav-selecta","search_users_favorites",a.StringFilters.escape_entities(a.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w="+a.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w="+a.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(z))})}if(a.config.flickr.user&&a.config.flickr.user.nsid){l.push({type:"search-contacts",message:a.transjax.get("nav-selecta","search_contacts",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/?"+b("w=contacts&q="+encodeURIComponent(z)))}},url:"/search/?"+b("w=contacts&q="+encodeURIComponent(z))})}l.push({type:"search-groups",message:a.transjax.get("nav-selecta","search_groups",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/groups/?"+b("q="+encodeURIComponent(z)))}},url:"/search/groups/?"+b("q="+encodeURIComponent(z))});l.push({type:"search-people",message:a.transjax.get("nav-selecta","search_people",'<em class="term-highlight">'+z+"</em>"),onclick:function(){if(!f){g("/search/people/?"+b("m=names&q="+encodeURIComponent(z)))}},url:"/search/people/?"+b("m=names&q="+encodeURIComponent(z))})}if(q&&typeof q==="string"){q=this._escapeForRegEx(q);q=a.StringFilters.substitute_equivalent_chars(q);var k=new RegExp(q,"i"),E,v,C,D,G,r;if(this.contacts){var B=false,y=[];for(C=0,G=this.contacts.length;C<G;C++){v=false;E=this.contacts[C];E.matched=null;if(E.n&&(!this.includeUser||z===this.meString)&&E.n===a.config.flickr.user.nsid){if(z===this.meString&&!this.skipList[E.n]){J=E}continue}if(E.e&&!E.u&&!E.n){continue}if(this.skipList&&(this.skipList[E.n]||this.skipList[E.e])){continue}if(this.searchOnUsername&&E.u&&E.u.search(k)!==-1){v=true;E.matched="username";E.matchedPos=E.u.search(k)}if(!v&&this.searchOnRealname&&E.r&&E.r.search(k)!==-1){v=true;E.matched="realname";E.matchedPos=E.r.search(k)}if(!v&&this.searchOnEmail&&E.e&&q!=="@"&&E.e.search(k)!==-1){v=true;E.matched="email";E.matchedPos=E.e.search(k)}if(!v&&this.searchOnPathAlias&&E.a&&E.a.search(k)!==-1){v=true;E.matched="path_alias";E.matchedPos=E.a.search(k)}if(v){B=true;E.type="contact";y.push(E)}}if(B){s={username:0,realname:1,email:2,path_alias:3};y.sort(function(L,m){var K=(L.n&&L.u)?"contact":"addressBookEntry";var M=(m.n&&m.u)?"contact":"addressBookEntry";if(K!==M){return(K==="contact")?-1:1}if(L.matchedPos===m.matchedPos){if(s[L.matched]===s[m.matched]){var N=L.u.charCodeAt(0),n=m.u.charCodeAt(0);if(N===n){return 0}else{if(N<n){return -1}else{return 1}}}else{if(s[L.matched]<s[m.matched]){return -1}else{return 1}}}else{if(L.matchedPos<m.matchedPos){return -1}else{return 1}}});if(z===this.meString&&J){J.matched="username";l.unshift(J)}l=l.concat(y.slice(0,this.maxContactsDisplayed))}}else{if(a.config.flickr.user&&a.config.flickr.user.nsid){this.fetchData()}}if(this.groups){}if(a.NavSelecta.nav_sections){var p=false,w=[],o;for(C=0,G=a.NavSelecta.nav_sections.length;C<G;C++){v=false;section=a.NavSelecta.nav_sections[C];section.matched=null;if(section.name&&section.name.search(k)!==-1){v=true;section.matched="name";section.matchedPos=section.name.search(k)}if(!v&&section.aliases&&section.aliases.length){for(D=0,r=section.aliases.length;D<r;D++){o=section.aliases[D].search(k);if(o!==-1&&(!section.matchedPos||o<section.matchedPos)){v=true;section.matched="alias";section.matchedPos=o}}}if(!v&&this.searchOnURL&&section.url&&section.url.search(k)!==-1){v=true;section.matched="url";section.matchedPos=section.url.search(k)}if(v){p=true;section.type="section";w.push(section)}}if(p){s={name:0,alias:1,url:2};w.sort(function(K,m){if(K.matchedPos===m.matchedPos){if(s[K.matched]===s[m.matched]){var L=K.name.charCodeAt(0),n=m.name.charCodeAt(0);if(L===n){return 0}else{if(L<n){return -1}else{return 1}}}else{if(s[K.matched]<s[m.matched]){return -1}else{return 1}}}else{if(K.matchedPos<m.matchedPos){return -1}else{return 1}}});l=l.concat(w.slice(0,this.maxSectionsDisplayed))}}}return l};c._formatResult=function(q,z,r){var s=this,B,v=[],G,m,l,w,k=!q?null:new RegExp(a.StringFilters.substitute_equivalent_chars(s._escapeForRegEx(q)),"gi"),t,p,x,D,A,o,u=false,E=false;if(!q){q=""}for(var y=0,C=z.length;y<C;y++){B=z[y].raw;if(!B){continue}if(B.type==="search-more"){G='<p class="bs-message bs-onclick ns-search ns-search-more"><span class="inner"><span class="icon"></span>'+B.message+"</span></p>";v.push(G);continue}if(B.type.match(/^search/)){G='<p class="bs-message bs-onclick ns-search"><a class="inner" href="'+B.url+'"><span class="icon"></span>'+B.message+"</a></p>";v.push(G);continue}if(B.type==="section"){G='<p class="bs-message ns-section ns-section-'+(B.sectionType?B.sectionType:"generic")+(E?"":" first-section")+'"><a href="'+B.url+'" class="inner"><span class="icon"></span>'+h(B.name,k)+"</a></p>";v.push(G);E=true;continue}if(B.globalSearchLink){G='<p class="bs-global-search-link bs-message bs-onclick"><span>'+B.message+"</span></p>";v.push(G);continue}if(B.message){G='<p class="bs-message'+(B.notFoundLink?"":" bs-onclick")+(B.disableActive?" bs-disable-active":"")+(B.className?" "+B.className:"")+'">'+B.message+"</p>";v.push(G);continue}pClasses=[];if(!u){pClasses.push("first-contact")}if(z[y+1]&&z[y+1].raw&&z[y+1].raw.type!=="contact"){pClasses.push("last-contact")}w=(pClasses.length)?' class="'+pClasses.join(" ")+'"':"";if(B.e&&!B.u&&!B.n){if(!B.i){B.i="/images/icon_unread.gif"}m=s.showIcon?'<img src="'+B.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"";l='<p email="'+B.e+'"'+w+'><span class="name name-email">'+m+'<strong class="username">'+h(B.e,k)+'</strong></span><span class="relationship"></span></p>';v.push(l);u=true;continue}t=(B.a)?B.a:B.n;p=' / <a href="/people/'+t+'/">'+a.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>";if(!B.i){B.i=(B.f&&B.f!==0&&B.s&&B.s!==0)?"http://farm"+B.f+"."+a.config.flickr.static_domain+"/"+B.s+"/buddyicons/"+B.n+".jpg":"http://www.flickr.com/images/buddyicon.gif"}if(F.config.flickr.is_secure){B.i=B.i.replace("http:","https:")}x="";if(s.showRelationship){if(B.d==="1"&&B.y==="1"){x+=a.transjax.get("bo-selecta","uber_contact_list_friend_and_family")}else{if(B.d==="1"){x+=a.transjax.get("bo-selecta","uber_contact_list_friend")}else{if(B.y==="1"){x+=a.transjax.get("bo-selecta","uber_contact_list_family")}else{if(B.removed==="1"){x+='<em class="contact-removed">'+a.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>"}else{if(s.searchingGlobally){x+=""}else{x+=a.transjax.get("bo-selecta","uber_contact_list_contact")}}}}}if(s.showEditRelationshipLink&&!s.searchingGlobally){x+=' <span class="edit-rel">(<a href="/people/'+t+'/relationship/" onclick="icon_windowOpenFromLink(\''+B.n+"'); return false;\">"+a.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>"}}m=s.showIcon?'<img src="'+B.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+B.n+'" '+s.iconAnimCode+">":"";m=s.linkUsernameToPhotostream?'<a href="/photos/'+t+'/">'+m+"</a>":m;D=s.showUsername?h(s._sanitizeString(B.u,k)):"";D=s.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+t+'/">'+D+"</a></strong>":'<strong class="username">'+D+"</strong>";A="";if(s.showSubtitle){if(!B.matched||B.matched==="realname"){A=B.r?h(B.r,k):a.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(B.matched==="username"){A=B.r?s._sanitizeString(B.r):a.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(B.matched==="email"){A=h(B.e,k)}else{if(B.matched==="path_alias"&&B.a){A="flickr.com/people/"+h(B.a,k)+"/"}}}}A=s.linkSubtitle?'<a title="'+a.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+t+'/" class="realname">'+A+"</a>":'<span class="realname">'+A+"</span>"}o=a.Node.create('<p nsid="'+B.n+'"'+w+'><span class="name">'+m+D+A+'</span><span class="relationship">'+x+"</span></p>");a.imageFader.attach(o.all("img"));v.push(o);u=true}return v};function h(o,m){if(!o){return o}var k,l,n;o=a.StringFilters.unescape_entities(o,true);l=m?o.search(m):-1;if(l===-1){return a.BoSelecta3.sanitizeString(o)}k=o.match(m);n=l+k[0].length;return a.StringFilters.escape_entities(o.substring(0,l),true)+'<span class="term-highlight">'+a.StringFilters.escape_entities(o.substring(l,n),true)+"</span>"+a.StringFilters.escape_entities(o.substring(n,o.length),true)}function j(k){return a.transjax.get("nav-selecta",k)}c.addSections=function(k){a.NavSelecta.nav_sections=a.NavSelecta.nav_sections.concat(k)};i.nav_sections=[{name:j("section_your_photostream"),sectionType:"photos",url:"/photos/me/",aliases:[]},{name:j("section_your_sets"),sectionType:"photos",url:"/photos/me/sets/",aliases:[]},{name:j("section_your_collections"),sectionType:"photos",url:"/photos/me/collections/",aliases:[]},{name:j("section_your_galleries"),sectionType:"photos",url:"/photos/me/galleries/",aliases:[]},{name:j("section_your_archives"),sectionType:"photos",url:"/photos/me/archives/",aliases:[]},{name:j("section_your_tags"),sectionType:"photos",url:"/photos/me/tags/",aliases:[]},{name:j("section_your_map"),sectionType:"map",url:"/photos/me/map/",aliases:[]},{name:j("section_your_favorites"),sectionType:"photos",url:"/photos/me/favorites/",aliases:[]},{name:j("section_your_stats"),sectionType:"stats",url:"/photos/me/stats/",aliases:["Graphs","Referrers","Referers","Views",j("section_alias_graphs"),j("section_alias_referrers"),j("section_alias_views")]},{name:j("section_your_apps"),sectionType:"",url:"/services/apps/by/me/",aliases:[]},{name:j("section_recent_activity"),sectionType:"activity",url:"/activity/",aliases:[]},{name:j("section_photos_of_you"),sectionType:"photos",url:"/photosof/me/",aliases:[]},{name:j("section_upload_photos"),sectionType:"photos",url:"/photos/upload/",aliases:["Uploadr",j("section_alias_upload")]},{name:j("section_your_account"),sectionType:"text",url:"/account/",aliases:["Settings","Preferences",j("section_alias_settings"),j("section_alias_preferences")]},{name:j("section_your_profile"),sectionType:"",url:"/people/me/",aliases:[]},{name:j("section_flickrmail"),sectionType:"text",url:"/mail/",aliases:[]},{name:j("section_organize_and_create"),sectionType:"photos",url:"/photos/organize/",aliases:["Batch",j("section_alias_batch")]},{name:j("section_prints_and_photo_products"),sectionType:"photos",url:"/photos/organize/?start_tab=print",aliases:["Snapfish","Prints","Calendar","Book","Buy",j("section_alias_prints"),j("section_alias_calendar"),j("section_alias_book"),j("section_alias_buy")]},{name:j("section_contacts"),sectionType:"photos",url:"/photos/contacts/",aliases:[]},{name:j("section_photos_of_your_contacts"),sectionType:"photos",url:"/photosof/contacts/",aliases:[]},{name:j("section_contact_list"),sectionType:"contacts",url:"/people/me/contacts/",aliases:[]},{name:j("section_find_your_friends"),sectionType:"contacts",url:"/import/people/",aliases:["Facebook","Gmail","Hotmail","Yahoo Mail"]},{name:j("section_invite_your_friends"),sectionType:"contacts",url:"/invite/",aliases:[]},{name:j("section_invite_history"),sectionType:"text",url:"/invite/history/",aliases:[]},{name:j("section_guest_pass_history"),sectionType:"text",url:"/invite/history/guests/",aliases:["Guestpass"]},{name:j("section_your_groups"),sectionType:"photos",url:"/groups/",aliases:[]},{name:j("section_recent_changes_in_your_groups"),sectionType:"activity",url:"/recent.gne",aliases:[]},{name:j("section_create_a_new_group"),sectionType:"text",url:"/groups_create.gne",aliases:[]},{name:j("section_the_tour"),sectionType:"text",url:"/tour/",aliases:[]},{name:j("section_explore"),sectionType:"photos",url:"/explore/",aliases:[]},{name:j("section_last_7_days_interesting"),sectionType:"photos",url:"/explore/interesting/7days/",aliases:[]},{name:j("section_popular_tags"),sectionType:"photos",url:"/photos/tags/",aliases:[]},{name:j("section_most_recent_uploads_to_flickr"),sectionType:"photos",url:"/photos/",aliases:[]},{name:j("section_video_on_flickr"),sectionType:"video",url:"/explore/video/",aliases:[]},{name:j("section_galleries"),sectionType:"photos",url:"/galleries/",aliases:[]},{name:j("section_explore_analog"),sectionType:"photos",url:"/analog/",aliases:["Film",j("section_alias_film")]},{name:j("section_world_map"),sectionType:"map",url:"/map/",aliases:[]},{name:j("section_places"),sectionType:"map",url:"/places/",aliases:[]},{name:j("section_the_commons"),sectionType:"photos",url:"/commons/",aliases:[]},{name:j("section_creative_commons"),sectionType:"photos",url:"/creativecommons/",aliases:["CC","License",j("section_alias_license")]},{name:j("section_flickrblog"),sectionType:"photos",url:"http://blog.flickr.com/",aliases:[]},{name:j("section_getty_images"),sectionType:"photos",url:"/gettyimages/",aliases:["License","Buy","Sell",j("section_alias_license"),j("section_alias_buy"),j("section_alias_sell")]},{name:j("section_code_flickr"),sectionType:"code",url:"http://code.flickr.com/",aliases:["API","Developer","Programming","Documentation",j("section_alias_developer"),j("section_alias_programming"),j("section_alias_documentation")]},{name:j("section_the_app_garden"),sectionType:"text",url:"/services/",aliases:["Apps"]},{name:j("section_camera_finder"),sectionType:"text",url:"/cameras/",aliases:[]},{name:j("section_developer_guidelines"),sectionType:"code",url:"/services/developer/",aliases:["API","Programming","Code","Documentation",j("section_alias_programming"),j("section_alias_code"),j("section_alias_documentation")]},{name:j("section_api_docs"),sectionType:"code",url:"/services/api/",aliases:["API","Developer","Programming","Code","Documentation",j("section_alias_developer"),j("section_alias_programming"),j("section_alias_code"),j("section_alias_documentation")]},{name:j("section_feeds"),sectionType:"text",url:"/services/feeds/",aliases:["RSS","Atom","Data"]},{name:j("section_help"),sectionType:"text",url:"/help/",aliases:[]},{name:j("section_community_guidelines"),sectionType:"text",url:"/help/guidelines/",aliases:[]},{name:j("section_the_help_forum"),sectionType:"text",url:"/help/forum/",aliases:[]},{name:j("section_faq"),sectionType:"text",url:"/help/faq/",aliases:["Frequently"]},{name:j("section_tools"),sectionType:"text",url:"/tools/",aliases:["Upload","Plug-in","Mac","Windows",j("section_alias_upload"),j("section_alias_plugin")]},{name:j("section_about_flickr"),sectionType:"meta",url:"/about/",aliases:["Staff",j("section_alias_staff")]},{name:j("section_jobs"),sectionType:"meta",url:"/jobs/",aliases:["Career","Work",j("section_alias_career"),j("section_alias_work")]},{name:j("section_mobile"),sectionType:"",url:"/mobile/",aliases:["Cellphone"]},{name:"Android",sectionType:"",url:"/android/",aliases:[]}];a.extend(a.NavSelecta,a.BoSelecta3,c,i)},"0.0.1",{requires:F.config.modules["nav-selecta"].requires||[],optional:F.config.modules["nav-selecta"].optional||[]});YUI.add("flickr-tooltips",function(a){var q=null,g=null,b=0,k=null,c=null,n=null;function h(){q=document.createElement("div");g=document.createElement("div");q.style.display="none";q.style.zIndex="200000";document.body.appendChild(q);q.appendChild(g)}function m(s,u,v,r,z){var t,B,C,A;s=a.one(s);z=z||"ToolTip";if(!q){h()}if(s.getStyle("visibility")==="hidden"){return}q.className=z;if(b){if(k===s._node){d();return}d()}r=(r===undefined)?"":r;v+=r.length;n=document.getElementById(u);g.innerHTML=n.innerHTML+r;g.style.width="auto";q.style.display="block";q.style.visibility="hidden";if(z!=="ToolTipSmall"){w=150;if(v>200){w=300}else{if(v>100){w=200}}g.style.width=w+"px"}t=q.offsetWidth;C=s.getX();A=s.getY();if(z==="ToolTipSmall"){C-=Math.round((t-s.get("offsetWidth"))/2)-5;if(s._node.tip_placement==="below"){A+=s.get("offsetHeight")+10}else{A-=22}}else{A+=20}B=f()-40;if(C+t>B){C=B-t}C=Math.max(10,C);q.style.left=C+"px";q.style.top=A+"px";b=1;q.style.display="block";q.style.visibility="visible";k=s._node;document.onmousedown=l}function l(s){var r=e(s);if(r===k||(o(r)&&j(r))){document.onmousedown=function(){}}else{d()}}function d(r){if(r){if(k!==r){return}}document.onmousedown=function(){};if(!q){return false}b=0;q.style.display="none";k="null";return false}function j(r){var s=r;while(s){if(s===q){return 1}s=s.parentNode}return 0}function o(r){var s=r;while(s){if(s.href){return 1}s=s.parentNode}return 0}function i(){if(window.innerHeight){return window.innerHeight}else{if(document.documentElement.clientHeight){return document.documentElement.clientHeight}else{if(document.body.clientHeight){return document.body.clientHeight}}}}function f(){if(window.innerWidth){return window.innerWidth}else{if(document.documentElement.clientWidth){return document.documentElement.clientWidth}else{if(document.body.clientWidth){return document.body.clientWidth}}}}function e(r){if(r&&r.target){return r.target}if(r&&r.srcElement){return r.srcElement}if(window.event){return window.event.srcElement}return null}function p(){window.show_tooltip=m}a.tooltips={init:p}},"0.0.1",{requires:["node","event","event-delegate"]});YUI.add("personmenu-transjax",function(b){var a={svn_bump:"",error_timeout:'Uh oh! There was a problem contacting the server.',error_getting:'Uh oh! There was a problem getting data from the server.'};b.transjax.add("personmenu",a)},"0.0.1",{requires:["transjax-base"]});YUI.add("personmenu-rapid",function(a){a.on("personmenu:show",function(b){if(b){a.rapidTracker.addModules(b)}})},"0.0.1",{requires:F.config.modules["personmenu-rapid"].requires||[]});YUI.add("personmenu",function(c){var u,H,o,y,d,Q,A,x,F,T;var S=c.config.flickr.flags.enable_photo_page_icon_lite_sidebar?70:48;function O(V){if(!O.is_init){H={open_on_icon_click:false,get_data_on_arrow_hover:true,show_delay:100,hide_delay:500,spinner_delay:200,io_timeout:10000,io_cache_ttl:120000,zeus:false};if(!c.Lang.isObject(V)){V={}}H=c.mix(V,H);u=c.one("body");if(c.config.flickr.user.nsid||c.config.flickr.flags.enable_grease){u.on("mouseover",b);u.on("mouseout",b);u.on("click",t);c.on("resize",t);c.on("contact_changer:change",L);c.on("contact_changer:open",M);c.on("PageContext:set",g)}O.is_init=true}}function h(W){var V,X;if(!h.cache){h.cache=new c.CacheSimple()}V=h.cache;if(c.Lang.isString(W)){X=V.retrieve(W);if(X&&X.response&&(new Date()).getTime()<X.payload.expires){return X.response}else{return null}}else{return V}}function f(V,W){if(!c.Lang.isString(V)){return false}h().add(V,W,{expires:(new Date()).getTime()+H.io_cache_ttl});return true}function n(V){f(V,null)}function B(V){return(function(){var W;return function(){var Z,aa,Y,X;if(!W||arguments.length!==W.length){Z=true}else{Y=Array.prototype.slice.call(arguments);X=Array.prototype.slice.call(W);for(aa in Y){if(Y.hasOwnProperty(aa)){if(Y[aa]!==X[aa]){Z=true;break}}}}if(Z){V.apply(this,arguments)}W=arguments}}())}function l(V){if(c.Lang.isString(V)){V=c.one(V)}if(!V instanceof c.Node){return false}return V}function b(V){if(!V.target.hasClass("personmenu-trigger")){return}switch(V.type){case"mouseover":if((d||A)&&Q){return}C(V.target);break;case"mouseout":N();break}}function L(V){n(V.nsid)}function z(V){switch(V.type){case"mouseover":U();if(H.get_data_on_arrow_hover){if(c.one(".personmenu .personmenu-arrow")&&(V.target.test(".personmenu .personmenu-arrow")||c.one(".personmenu .personmenu-arrow").contains(V.target))){if(!d&&!h(o)){P(o)}}}break;case"mouseout":if(!d&&!A){I()}break;case"click":if(c.one(".personmenu .personmenu-arrow")&&(V.target.test(".personmenu .personmenu-arrow")||c.one(".personmenu .personmenu-arrow").contains(V.target))){V.preventDefault();w()}else{if(H.zeus&&(c.one(".personmenu .personmenu-more")&&(V.target.test(".personmenu .personmenu-more")||c.one(".personmenu .personmenu-more").contains(V.target)))){if(!d){V.preventDefault();V.halt();k()}}else{if(H.open_on_icon_click&&c.one(".personmenu .personmenu-icon-link")&&(V.target.test(".personmenu .personmenu-icon-link")||c.one(".personmenu .personmenu-icon-link").contains(V.target))){if(!d){V.preventDefault();k()}}else{if(c.one(".personmenu .personmenu-relationship-change")&&(V.target.test(".personmenu .personmenu-relationship-change")||c.one(".personmenu .personmenu-relationship-change").contains(V.target))){if(c.config.modules["contact-changer"]){V.preventDefault();s()}c.use("contact-changer",function(X){i();X.contact_changer.show(o)})}else{if(c.one(".personmenu .photos-trigger")&&V.target.test(".personmenu .photos-trigger")){var W=V.target.ancestor("li").one(".photos");if(W){V.preventDefault();W.toggleClass("photos-open")}}else{c.fire("personmenu:navigate",{id:p().get("id"),url:V.target.get("href")})}}}}}break}}function t(V){if(V.type==="click"){if(H.open_on_icon_click&&V.target.hasClass("personmenu-trigger")){V.preventDefault();V.halt();k(V.target)}else{if(Q&&!c.one(".personmenu").contains(V.target)){M()}}}if(V.type==="resize"){if(Q){m(y)}}}function g(V){if(V.newVal!==""){M()}}function U(){if(F){window.clearTimeout(F);F=null}}function N(){if(x){window.clearTimeout(x);x=null}}function C(V){U();N();if(Q&&!H.zeus){r(V)}else{x=window.setTimeout(function(){x=null;r(V)},H.show_delay)}}function I(){if(!F){F=window.setTimeout(function(){F=null;M()},H.hide_delay)}}function j(W){var V;W=l(W);V=W.get("data-defer-src")||W.get("src");return V}function R(W){var V;W=l(W);V=a(W);return V?"/photos/"+V:false}function a(X){var W,V;W=j(X);V=W.split("#")[1];return J(V)?V:false}function J(V){return(/^[0-9]+@N[0-9]{2}$/).test(V)}function p(){var V;if(!p.menu){if(H.zeus){V='<div class="personmenu personmenu-hidden personmenu-zeus"><div class="personmenu-hd"><a data-track="icon-link" href="" class="personmenu-icon-link rapidnofollow"><img class="personmenu-icon"></a><span class="personmenu-spinner"></span><span class="personmenu-name"></span></div><div class="personmenu-bd"></div></div>'}else{V='<div class="personmenu personmenu-hidden"><div class="personmenu-hd rapidnofollow"><a data-track="icon-link" href="" class="personmenu-icon-link rapidnofollow"><span class="personmenu-spinner"></span><img class="personmenu-icon"></a><a data-track="show-menu" href="" class="rapidnofollow personmenu-arrow" role="button"><span></span></a></div><span class="personmenu-hd-shadow"></span><div class="personmenu-bd"></div><span class="personmenu-bd-border-blocker"></span></div>'}c.one("body").append(V);p.menu=c.one(".personmenu");p.menu.on("mouseover",z);p.menu.on("mouseout",z);p.menu.on("click",z)}return p.menu}function w(){if(d){r()}else{k()}}function q(V,W){if(V){p().one(".personmenu-icon-link").set("href",V)}if(W){p().one(".personmenu-icon").set("src",W)}}q=B(q);function s(){A=true;p().addClass("personmenu-spinning");if(H.zeus){if(p().one(".personmenu-spinner")){p().one(".personmenu-spinner").addClass("personmenu-spinner-on")}}else{T=window.setTimeout(function(){p().one(".personmenu-spinner").addClass("personmenu-spinner-on");T=null},H.spinner_delay)}}function i(){A=false;if(T){window.clearTimeout(T);T=null}p().removeClass("personmenu-spinning");if(p().one(".personmenu-spinner")){p().one(".personmenu-spinner").removeClass("personmenu-spinner-on")}}function G(){Q=true;p().removeClass("personmenu-hidden")}function M(){Q=false;p().addClass("personmenu-hidden")}function m(V){var W,X;W=V.getXY();X=H.zeus?8:6;W[0]-=parseInt((S-V.get("width"))/2,10)+X;W[1]-=parseInt((S-V.get("height"))/2,10)+X;p().setStyle("position","absolute");p().setStyle("left",W[0]+"px");p().setStyle("top",W[1]+"px")}function D(V){var X,Z;X=R(V);Z=j(V);q(X,Z);if(H.zeus){var W=a(V);var Y='<ul><li><a href="/people/'+W+'" class="personmenu-item">Profile</a></li><li><a href="'+X+'" class="personmenu-item">Photostream</a></li><li class="personmenu-sep-bottom"><a href="/photos/'+W+'/favorites" class="personmenu-item">Favorites</a></li><li><a href="" class="personmenu-item personmenu-more">More...</a></li></ul>';p().one(".personmenu-bd").set("innerHTML",Y);p().one(".personmenu-name").set("innerHTML",W)}}D=B(D);function P(V){var Y,X,W;P.in_progress_nsids=P.in_progress_nsids||{};Y=P.in_progress_nsids;X={success:function(ac,ab,Z){var aa=ab.responseText;if(aa){f(Z,aa)}if(A&&o===Z){E(Z)}},failure:function(ab,aa,Z){if(A&&o===Z){if(aa.statusText==="timeout"){e(c.transjax.get("personmenu","error_timeout"))}else{e(c.transjax.get("personmenu","error_getting"))}}},end:function(aa,Z){delete Y[Z]}};W="/personmenu_fragment.gne?nsid="+V+"&magic_cookie="+c.config.flickr.magic_cookie;if(H.zeus){W=W+"&zeus=1"}if(Y[V]){return false}Y[V]=V;c.io(W+"&cachebust="+(new Date()).getTime(),{timeout:H.io_timeout,on:X,"arguments":V})}function E(V){var W=h(V);if(W){if(H.zeus){p().set("innerHTML",W)}else{p().one(".personmenu-bd").set("innerHTML",W)}i();var X=y.getAttribute("data-menu-id");if(X){p().set("id",X)}else{X=false}c.fire("personmenu:show",X);v()}else{s();P(V)}}function e(W){var V='<div class="alert">'+W+"</div>";p().one(".personmenu-bd").set("innerHTML",V);i();v()}function r(V){var W;V=l(V)||y;if(!V){return false}y=V;W=a(V);if(!W){return false}o=W;i();K();D(V);m(V);G();if(H.zeus&&!h(W)){P(W)}return true}function k(V){var W;V=l(V)||y;if(!V){return false}y=V;W=a(V);if(!W){return false}o=W;r(V);E(W);return true}function K(){p().addClass("personmenu-closed");p().removeClass("personmenu-open");d=false}function v(){p().removeClass("personmenu-closed");p().addClass("personmenu-open");d=true;p().one(".personmenu-bd").vis.animScrollIntoView()}c.personmenu={init:O,showClosed:r,showOpen:k,hide:M}},"0.0.1",{requires:["node","anim","anim-scroll","node-visibility","event-custom","cache-simple","io-base","personmenu-transjax","personmenu-css"],optional:["contact-changer"]});(function(){var a="flickr";YUI.add(a,function(c){function b(){c.FlickrApp.init();if(c.config.flickr.flags.enable_grease||c.config.flickr.user&&c.config.flickr.user.nsid){c.personmenu.init()}if(c.config.flickr.sharing.use_share_this_v3){c.use("share-this-v3-menu",function(h){var i=(h.config.flickr.flags.enable_2013_photo_page&&h.config.flickr.page_type==="photo")?"br":"t";var f,e;(function g(){function l(m){var n={x:0,y:0};while(m){n.x+=m.offsetLeft;n.y+=m.offsetTop;m=m.offsetParent}return n}function j(m){if(document.all){return document.all[m]}else{if(document.getElementById){return document.getElementById(m)}else{return null}}}var k=l(document.getElementById("share-this-v3-more-button"));if(k.y<411){i="tr";f=true;e=true}})();h.shareThisV3Menu.init({arrowPosition:i,overrideRefresh:f,scroll:e})});if(c.config.flickr.sharing.share_immediately_service){c.use("share-this-v3-dialog",function(e){var f=e.config.flickr.sharing.share_immediately_service;e.shareThisV3Dialog.share_by_service(f.service_id,f.service_type_id)})}}if(c.config.flickr.flags.enable_tumblr_trackr){c.use("tumblr-trackr",function(e){e.tumblrTrackr.init()})}if(c.config.flickr.flags.view_count_on_visible){c.ViewCount.onVisible("img.view-count-on-visible")}c.tooltips.init();if(window.devicePixelRatio>1&&document.cookie.indexOf("rtna=1")===-1){var d=new Date();d.setTime(d.getTime()+2592000000);document.cookie="rtna=1; expires="+d.toGMTString()+"; path=/"}if(c.config.flickr.flags.enable_sitekey_fetcher){window.setInterval(function(){if(c.config.flickrAPI&&c.config.flickrAPI.api_key){c.use("gallery-flickr-api",function(f){var h,e,g;h="flickr.site.getKey";e={};g={success:function(i){if(i&&i.data&&i.data.key&&i.data.key._content&&f.Lang.isString(i.data.key._content)){f.config.flickrAPI.api_key=i.data.key._content}},failure:function(i){}};f.flickrAPI.callMethod(h,e,g)})}},7*60*60*1000)}}c.flickr=b},"0.0.1",{requires:F.config.modules[a].requires||[],optional:F.config.modules[a].optional||[]})}());YUI.add("popup-login",function(a){var e="/photo_grease_postlogin.gne",i=false,r=false,p=false,s,q="head-upload-link",c="signin-popup",m=/cookie_session=[^;]+/gi,b=a.global_dialog;function o(){var t={method:"post",data:"random=0",on:{success:function(w,v,u){if(v&&(v.responseText==="1,1"||v.responseText==="1,0")){a.fire("login:authenticated",v.responseText)}else{d()}}}};a.later(100,this,h);a.io("/fragment.gne?name=social-auth-fragment",t)}function h(){if(b){b.show({loading:true,modal:true})}}function d(){if(b){b.hide()}}function l(w){var z=650;var x;if(a.config.flickr.flags.enable_ads_on_login_page){x=a.one(window).get("winWidth")||0;if(!isNaN(z)){z=Math.max(880,Math.min(1200,x))}}if(a.config.flickr.is_touch_device){var v=e+"?d="+window.location+"&notpopup=1";window.location=w+"?popup=0&redir="+encodeURIComponent(v);return false}var u=w+"?popup=1&redir="+e+"?d="+window.location;try{s=window.open(u,"newWindow","width="+z+",height=650,resizable=1,scrollbars=1,location=yes")}catch(y){return true}try{if(s.focus){s.focus()}}catch(t){}a.later(500,this,function(){if(!s||s.closed||typeof s.closed==="undefined"||!i){var A=e+"?d="+window.location+"&notpopup=1";window.location=w+"?popup=0&redir="+encodeURIComponent(A)}});return false}function j(){a.later(20,this,f);r=true;l("/signin")}var k=0;function f(){if(document.cookie.match(m)){r=false;o()}else{a.later(20,this,f)}}function g(){var t=false;if(s){try{s.close();t=true}catch(u){}}return t}function n(){if(a.config.flickr.user.nsid){return}a.one("body").on("click",function(v){var u=v.target.get("id");if(v.target.ancestor("."+c,true)){v.preventDefault();v.halt();j()}else{if(u===q){p=true;v.halt();j()}}});var t=a.one("window");t.on("login|blur",function(u){i=true});t.on("login|focus",function(u){i=false;if(r){o()}});a.on("login:authenticated",function(v){var u=window.location.toString();g();if(v==="1,1"){window.location="/"}else{if(p){window.location="/photos/upload"}else{if(u.match(/\/new/i)){window.location="/"}else{if(window.location.pathname&&window.location.pathname==="/"){window.location="/"}else{window.location.reload()}}}}})}a.popup_login={init:n}},"0.0.1",{requires:["node","event","io-base"]});YUI.add("liquid-resizer",function(b){function a(c){b.on("resize",b.betterThrottle(function(){var d=F.liquid.resizePage(true);b.fire("Liquid:resize",d)},20))}b.liquidResizer={init:a}},"0.0.1",{requires:F.config.modules["liquid-resizer"].requires||[],optional:F.config.modules["liquid-resizer"].optional||[]});(function(){var a="parallax";YUI.add(a,function(b){var e;var i=true;var j=false;var f=0;var g=0;var h=0;var c,n,m;var k=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(p){window.setTimeout(p,1000/60)});function o(p){if(typeof window.scrollY==="undefined"){return}if((/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i).test(navigator.userAgent||navigator.vendor||window.opera)){return}if(p.offset){f=p.offset}if(p.selector){d(p.selector)}if(p.asset){asset=p.asset}if(p.threshold){g=p.threshold}if(e){b.one(window).on("scroll",function(){h=window.scrollY;if(h>g||!i){return}return l();if(!j&&i&&h<=g){k(l);j=true}},this)}}function d(p){e=b.one(p);l()}function l(){j=false;var p=f+Math.round(h*0.5);e.setStyle("top",p+"px")}b.parallax={init:o,setContainer:d,enable:function(){i=true},disable:function(){i=false}}},"0.0.1",{requires:F.config.modules[a].requires||[],optional:F.config.modules[a].optional||[]})}());/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("handlebars-base",function(e,t){
/*!
Handlebars.js - Copyright (C) 2011 Yehuda Katz
https://raw.github.com/wycats/handlebars.js/master/LICENSE
*/
;var n=e.namespace("Handlebars");n.VERSION="1.0.0",n.COMPILER_REVISION=4,n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},n.helpers={},n.partials={};var r=Object.prototype.toString,i="[object Function]",s="[object Object]";n.registerHelper=function(e,t,i){if(r.call(e)===s){if(i||t)throw new n.Exception("Arg not supported with multiple helpers");n.Utils.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},n.registerPartial=function(e,t){r.call(e)===s?n.Utils.extend(this.partials,e):this.partials[e]=t},n.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Missing helper: '"+e+"'")}),n.registerHelper("blockHelperMissing",function(e,t){var s=t.inverse||function(){},o=t.fn,u=r.call(e);return u===i&&(e=e.call(this)),e===!0?o(this):e===!1||e==null?s(this):u==="[object Array]"?e.length>0?n.helpers.each(e,t):s(this):o(e)}),n.K=function(){},n.createFrame=Object.create||function(e){n.K.prototype=e;var t=new n.K;return n.K.prototype=null,t},n.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,t){if(n.logger.level<=e){var r=n.logger.methodMap[e];typeof console!="undefined"&&console[r]&&console[r].call(console,t)}}},n.log=function(e,t){n.logger.log(e,t)},n.registerHelper("each",function(e,t){var s=t.fn,o=t.inverse,u=0,a="",f,l=r.call(e);l===i&&(e=e.call(this)),t.data&&(f=n.createFrame(t.data));if(e&&typeof e=="object")if(e instanceof Array)for(var c=e.length;u<c;u++)f&&(f.index=u),a+=s(e[u],{data:f});else for(var h in e)e.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(e[h],{data:f}),u++);return u===0&&(a=o(this)),a}),n.registerHelper("if",function(e,t){var s=r.call(e);return s===i&&(e=e.call(this)),!e||n.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){return n.helpers["if"].call(this,e,{fn:t.inverse,inverse:t.fn})}),n.registerHelper("with",function(e,t){var s=r.call(e);s===i&&(e=e.call(this));if(!n.Utils.isEmpty(e))return t.fn(e)}),n.registerHelper("log",function(e,t){var r=t.data&&t.data.level!=null?parseInt(t.data.level,10):1;n.log(r,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];n.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<o.length;n++)this[o[n]]=t[o[n]]},n.Exception.prototype=new Error,n.SafeString=function(e){this.string=e},n.SafeString.prototype.toString=function(){return this.string.toString()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/,l=function(e){return u[e]||"&amp;"};n.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(e){return e instanceof n.SafeString?e.toString():e==null||e===!1?"":(e=e.toString(),f.test(e)?e.replace(a,l):e)},isEmpty:function(e){return!e&&e!==0?!0:r.call(e)==="[object Array]"&&e.length===0?!0:!1}},n.VM={template:function(e){var t={escapeExpression:n.Utils.escapeExpression,invokePartial:n.VM.invokePartial,programs:[],program:function(e,t,r){var i=this.programs[e];return r?i=n.VM.program(e,t,r):i||(i=this.programs[e]=n.VM.program(e,t)),i},merge:function(e,t){var r=e||t;return e&&t&&(r={},n.Utils.extend(r,t),n.Utils.extend(r,e)),r},programWithDepth:n.VM.programWithDepth,noop:n.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=e.call(t,n,r,i.helpers,i.partials,i.data),o=t.compilerInfo||[],u=o[0]||1,a=n.COMPILER_REVISION;if(u!==a){if(u<a){var f=n.REVISION_CHANGES[a],l=n.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(e,t,r,i,s,o){var u={helpers:i,partials:s,data:o};if(e===undefined)throw new n.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(r,u);if(!n.compile)throw new n.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return s[t]=n.compile(e,{data:o!==undefined}),s[t](r,u)}},n.template=n.VM.template,n.VERSION+="-yui",n.revive=n.template,e.namespace("Template").Handlebars=n},"3.11.0",{requires:[]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("handlebars-compiler",function(e,t){
/*!
Handlebars.js - Copyright (C) 2011 Yehuda Katz
https://raw.github.com/wycats/handlebars.js/master/LICENSE
*/
;var n=e.Handlebars,r=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2][2]==="&");break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[o[a]],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=o[a];break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],o[a]];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[a]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[a]));break;case 47:this.$=new i.DataNode(o[a]);break;case 48:this.$=new i.IdNode(o[a]);break;case 49:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 50:this.$=[{part:o[a]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16
:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(
){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return n.yytext="\\",14;case 1:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 2:return 14;case 3:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 4:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),31;case 23:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return n.yytext=n.yytext.substr(1,n.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();n.Parser=r,n.parse=function(e){return e.constructor===n.AST.ProgramNode?e:(n.Parser.yy=n.AST,n.Parser.parse(e))},n.AST={},n.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new n.AST.ProgramNode(t))},n.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},n.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},n.AST.BlockNode=function(e,t,r,i){var s=function(e,t){if(e.original!==t.original)throw new n.Exception(e.original+" doesn't match "+t.original)};s(e.id,i),this.type="block",this.mustache=e,this.program=t,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},n.AST.ContentNode=function(e){this.type="content",this.string=e},n.AST.HashNode=function(e){this.type="hash",this.pairs=e},n.AST.IdNode=function(e){this.type="ID";var t="",r=[],i=0;for(var s=0,o=e.length;s<o;s++){var u=e[s].part;t+=(e[s].separator||"")+u;if(u===".."||u==="."||u==="this"){if(r.length>0)throw new n.Exception("Invalid path: "+t);u===".."?i++:this.isScoped=!0}else r.push(u)}this.original=t,this.parts=r,this.string=r.join("."),this.depth=i,this.isSimple=e.length===1&&!this.isScoped&&i===0,this.stringModeValue=this.string},n.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e.original},n.AST.DataNode=function(e){this.type="DATA",this.id=e},n.AST.StringNode=function(e){this.type="STRING",this.original=this.string=this.stringModeValue=e},n.AST.IntegerNode=function(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},n.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},n.AST.CommentNode=function(e){this.type="comment",this.comment=e};var i=n.Compiler=function(){},s=n.JavaScriptCompiler=function(){};i.prototype={compiler:i,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{
r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0;if(e.id.isScoped||e.id.depth)throw new n.Exception("Scoped data references are not supported: "+e.original);this.opcode("lookupData");var t=e.id.parts;for(var r=0,i=t.length;r<i;r++)this.opcode("lookup",t[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var o=function(e){this.value=e};s.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":s.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,r,i){this.environment=e,this.options=t||{},n.log(n.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var s=e.opcodes,o;this.i=0;for(l=s.length;this.i<l;this.i++)o=s[this
.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=n.COMPILER_REVISION,f=n.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(e)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return n.log(n.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:s,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile
(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new o(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r;if(n){var i=this.popStack(!0);if(i instanceof o)r=i.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(s)+" = "+i+"),",r=this.topStack()}}else r=this.topStack();var u=e.call(this,r);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(r)||(r=this.nextStack()),this.source.push(r+" = ("+t+u+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof o?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof o?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof o?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),a=s.RESERVED_WORDS={};for(var f=0,l=u.length;f<l;f++)a[u[f]]=!0;s.isValidJavaScriptVariableName=function(e){return!s.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},n.precompile=function(e,t){if(e==null||typeof e!="string"&&e.constructor!==n.AST.ProgramNode)throw new n.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r=n.parse(e),o=(new i).compile(r,t);return(new s).compile(o,t)},n.compile=function(e,t){function o(){var r=n.parse(e),o=(new i).compile(r,t),u=(new s).compile(o,t,undefined,!0);return n.template(u)}if(e==null||typeof e!="string"&&e.constructor!==n.AST.ProgramNode)throw new n.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r;return function(e,t){return r||(r=o()),r.call(this,e,t)}};var c=["debug","info","warn","error"];n.logger.log=function(e,t){},n.render=function(e,t,r){return n.compile(e)(t,r)}},"3.11.0",{requires:["handlebars-base"]});
(function(){var d="template-fetcher",a="/fetch_template.gne";var b=Object.prototype.toString,c="[object Function]";YUI.add(d,function(g){var e={};function f(i,l,k){if(e[i]){l(e[i],i);return}if(g.config.flickr.flags.precompiled_explore_templates){e[i]=Handlebars.templates[i+".mustache"];l(e[i],i);return}var j=document.getElementById(i);if(j){e[i]=g.Handlebars.compile(j.innerHTML);if(!k){window.setTimeout(function(){l(e[i],i)},0)}else{l(e[i],i)}}else{g.io(a,{data:"template="+i,on:{success:function(p,n,m){e[i]=g.Handlebars.compile(n.responseText);l(e[i],i)}},context:this})}}function h(k,n){var j=0,m;if(g.Lang.isArray(k)){j=k.length;for(var l=0;l<j;l++){if(g.config.flickr.flags.precompiled_explore_templates){e[k[l]]=Handlebars.templates[k[l]+".mustache"];Handlebars.registerPartial(k[l],e[k[l]])}else{m=document.getElementById(k[l]);if(m){e[k[l]]=g.Handlebars.compile(m.innerHTML);g.Handlebars.registerPartial(k[l],e[k[l]])}}}n()}else{f(k,function(i){g.Handlebars.registerPartial(k,i);n()})}}g.templateFetcher={fetch:f,registerPartial:h}},"0.0.1",{requires:F.config.modules[d].requires||[],optional:F.config.modules[d].optional||[]})}());YUI.add("photos-subnav-view",function(c){var q={debug:false,transitionDelay:250,minPhotoWidth:1000,minHeightRatio:768/2048,bestPhotoWidth:2048,smallestHeader:{width:975,height:235},cssState:{root:{hasModal:"subnav-modals",blockScroll:"no-scroll"},tools:{base:"subnav-tools",curtain:"subnav-curtain",view:"subnav-view"},actions:{confirm:"sn-button-confirm",cancel:"sn-button-cancel"},popupView:{base:"subnav-popup",open:"subnav-popup-open",loading:"subnav-state-loading"}},groupId:null,userNSID:null,setId:null};var j={lowres:"*lowres*",confirm:"*confirm*",cancel:"*cancel*"};var a={setupHandler:function(s){return function(t){t.preventDefault();t.stopPropagation();this[s](t)}},delay:function(u,t,s){s&&(u=c.bind(u,s));setTimeout(u,t)},log:function(){if(!q.debug||!console||!console.log.apply){return}var s=[].slice.call(arguments);s.unshift("[SUBNAV-VIEW]");console.log.apply(console,s)},disableScrolling:function(u){var t;try{t=document.documentElement.scrollHeight>document.documentElement.clientHeight}catch(s){t=true}if(typeof u==="number"){window.scroll(0,u)}t&&c.one(document.documentElement).addClass("no-scroll")},restoreScrolling:function(){c.one(document.documentElement).removeClass("no-scroll")},disableClicks:function(s,t){if(!document.body.addEventListener){return}a._disableClicksEvtHandler=function(u){if(!c.one(u.target).ancestors(s,true).isEmpty()){return}u.preventDefault();u.stopPropagation();t&&t(u)};document.body.addEventListener("click",a._disableClicksEvtHandler,true)},enableClicks:function(){if(!a._disableClicksEvtHandler){return}document.body.removeEventListener("click",a._disableClicksEvtHandler,true);a._disableClicksEvtHandler=null},extend:function(s){s||(s={});c.Array.forEach(Array.prototype.slice.call(arguments,1),function(u){if(!u){return}for(var t in u){s[t]=u[t]}});return s},objectCreate:function(t,v){var s=function(){};s.prototype=t;var u=new s();return v?a.extend(u,v):u},isIE:function(s,t){if(c.UA.ie&&c.UA.ie<=s){t&&t(c.UA);return true}return false}};var l={init:function(s){s||(s={});this.userNSID=s.userNSID;this.onFailure=s.onFailure||function(){}},handleResponse:function(t){var s=this;t=[].slice.call(t,-2);while(t.length&&typeof t[0]!=="function"){t.shift()}var v=t.shift()||null;var u=t.shift()||null;return{success:function(w){a.log("API:success",w);v&&v(w.data)},failure:function(w){a.log("API:failure",w);if(u){return u(w.data)}s.onFailure(w.data)},abort:function(){this.success=function(){};this.failure=function(){}}}},callMethod:function(u,t,s){a.log("API:call",u,t);c.flickrAPI.callMethod(u,t,s);return s},getUserInfo:function(u,s){var t={user_id:this.userNSID};return this.callMethod("flickr.people.getInfo",t,this.handleResponse(arguments))},getPhotoSizes:function(s,v,t){var u={photo_id:s};return this.callMethod("flickr.photos.getSizes",u,this.handleResponse(arguments))},setAccountCoverPhoto:function(s,w,v,t){w||(w=[]);var u={photo_id:s,x:w[0]||0,y:w[1]||0};return this.callMethod("flickr.coverphoto.setAccountCover",u,this.handleResponse(arguments))},setGroupCoverPhoto:function(u,s,x,w,t){x||(x=[]);var v={group_id:u,photo_id:s,x:x[0]||0,y:x[1]||0};return this.callMethod("flickr.coverphoto.setGroupCover",v,this.handleResponse(arguments))},setSetCoverPhoto:function(t,s,x,w,u){x||(x=[]);var v={set_id:t,photo_id:s,x:x[0]||0,y:x[1]||0};return this.callMethod("flickr.coverphoto.setSetCover",v,this.handleResponse(arguments))}};var b=function(s,t){this.source={source:s.source,width:s.width,height:s.height,id:s.id};this.offset=[0,0];this.photo=c.merge({},this.source);this.original=t;this.asset={width:2048,height:768};q.debug&&(window._P=this)};b.prototype={normalize:function(){this.photo.height=Math.ceil(this.scaleToView(this.photo.height));this.photo.width=this.view.width},scaleToOriginal:function(s,t){t||(t=this.photo);return s*this.original.width/t.width},scaleToView:function(s,t){t||(t=this.photo);return s*this.view.width/t.width},scaleToAsset:function(s,t){t||(t=this.photo);return s*this.asset.width/t.width},setBoundingBox:function(t,s){this.view={width:parseInt(t,10),height:parseInt(s,10)};this.worst={width:q.smallestHeader.width,height:q.smallestHeader.height}},resetOffset:function(s,u){if(s===undefined){s=this.offset[0]+this.baseOffset[0];u=this.offset[1]+this.baseOffset[1];this.offset=[0,0]}else{if(s==="middle"){s=-1*Math.floor((this.photo.width-this.view.width)/2);u=-1*Math.floor((this.photo.height-this.view.height)/2)}else{if(s.getStyle){var t=s.getStyle("background-position").split(/[^\d-]+/).slice(0,2);s=parseInt(t[0],10);u=parseInt(t[1],10)}}}this.baseOffset=[s,u]},moveBy:function(s,v){var u=this.getOffsetValues(s,v);var t=this.getDragBoundaries();if(u[1]<t.min){v=t.min-this.baseOffset[1]}else{if(u[1]>t.max){v=t.max-this.baseOffset[1]}}s=0;this.offset=[s,v]},getDragBoundaries:function(){var s=23;return{min:-1*(this.photo.height-this.view.height-s),max:0}},_pixel:function(){return[].slice.apply(arguments).map(function(s){return typeof s==="string"?s:(s+"px")}).join(" ")},getSize:function(){return"100%"},getOffsetValues:function(s,u){var t=arguments.length?[s,u]:this.offset;return[t[0]+this.baseOffset[0],t[1]+this.baseOffset[1]]},getCropValues:function(){var s=this.getOffsetValues();s[0]=0;s[1]=Math.floor(-1*this.scaleToOriginal(s[1]));return s},getOffset:function(){var s=this.getOffsetValues();s[0]="50%";return this._pixel(s[0],s[1])}};var k=function(){b.apply(this,arguments)};k.prototype=a.objectCreate(b.prototype,{normalize:function(){var s=q.bestPhotoWidth/this.photo.width;this.photo.width=q.bestPhotoWidth;this.photo.height=Math.floor(this.photo.height*s)},getSize:function(){return this._pixel(this.photo.width,this.photo.height)}});var r=function(){b.apply(this,arguments)};r.prototype=a.objectCreate(b.prototype,{getSize:function(){return"100%"}});var m=function(){b.apply(this,arguments)};m.prototype=a.objectCreate(b.prototype,{getCropValues:function(){var u=this.getOffsetValues();var s=(-1*u[1])+(this.view.height/2);s=this.scaleToAsset(s);var t=s-(this.asset.height/2);u[0]=0;u[1]=Math.round(this.scaleToOriginal(t,this.asset));return u},getDragBoundaries:function(){var t=this.view.width/this.asset.width;var s=Math.ceil(t*(this.asset.height-this.scaleToAsset(this.worst.height,this.worst))/2);var u={min:-1*(this.photo.height-this.view.height-s),max:-1*s};if(u.min>u.max){u.min=-1*(this.photo.height-this.view.height);u.max=0}return u},getSize:function(){return"100%"}});var p=function(){};p.prototype={show:function(){var s=this.get("container");s.show();a.delay(function(){s.addClass("subnav-state-open")},0);this.set("visible",true);a.log("SHOW",this.name)},hide:function(){var s=this.get("container");s.removeClass("subnav-state-open");a.delay(s.hide,q.transitionDelay,s);this.set("visible",false);a.log("HIDE",this.name)},initializer:function(){var s=this.get("container");s.addClass("subnav-view").addClass(this.get("cssClassName"));this._rendered={};this.render(this.get("template"))},render:function(u,s){var t;if(this._rendered[s||"_root"]){return}t=this.get("container");t.removeClass("fail");this._rendered[s||"_root"]=true;(s?t.one(s):t).setHTML(u)}};var o=c.PhotosSubnavView=c.Base.create("PhotosSubnavView",c.View,[p],{events:{".change-photo":{click:a.setupHandler("showPicker")}},showPicker:function(){var t=this;var s=this.openView("CoverPhotoPicker");s.onSelect=function(v){t.closeView(s);t.get("container").addClass("subnav-state-loading");var u=new Image();u.onload=function(){t.get("container").removeClass("subnav-state-loading");t.positionCoverPhoto(v.photo)};u.src=v.photo.source}},positionCoverPhoto:function(t){var H=this;var x=this.get("container");H.get("parallax")&&H.get("parallax").disable();var u=function(I){if(I===false){a.restoreScrolling();a.enableClicks();return x.removeClass("subnav-state-editing")}x.addClass("subnav-state-editing");a.disableScrolling(0);a.disableClicks(".cover-photo-position",function(){if(s.isPositioning||s.isShaking){return}s.isShaking=true;x.addClass("subnav-state-shake");setTimeout(function(){x.removeClass("subnav-state-shake");s.isShaking=false},q.transitionDelay*3)});a.isIE(9,function(){x.all("*").setAttribute("unselectable","on")})};u();var D=x.one(".cover-photo");this._undo=D.cloneNode(true);var v=new m(t,t.original);v.setBoundingBox(D.getComputedStyle("width"),D.getComputedStyle("height"));v.normalize();D.setStyle("backgroundImage","url("+v.photo.source+")");D.setStyle("backgroundSize",v.getSize());v.resetOffset("middle");D.setStyle("backgroundPosition",v.getOffset());var C,A,w,G;var s={isShaking:false,isPositioning:false};var B=c.one(document.body);var E=function(I){s.isPositioning=true;B.on("mouseup",y);B.on("mousemove",z);B.addClass("subnav-state-positioning");v.resetOffset();w=[I.clientX,I.clientY]};var z=function(I){I.preventDefault();I.stopImmediatePropagation();v.moveBy(I.clientX-w[0],I.clientY-w[1]);D.setStyle("backgroundPosition",v.getOffset())};var y=function(I){B.detach("mousemove",z);B.detach("mouseup",y);B.removeClass("subnav-state-positioning");v.moveBy(I.clientX-w[0],I.clientY-w[1]);s.isPositioning=false;a.log("DRAGEND",v.offset)};x.on("mousedown",E);c.one(".cover-photo-position-save").detach("click").on("click",function(){x.detach("mousedown",E);u(false);H.saveCoverPhoto(v);H.get("parallax")&&H.get("parallax").enable()});c.one(".cover-photo-position-cancel").detach("click").on("click",function(){x.detach("mousedown",E);u(false);D.get("parentNode").replaceChild(H._undo,D);if(H.get("parallax")){H.get("parallax").setContainer(H._undo);H.get("parallax").enable()}H._undo=null})},saveCoverPhoto:function(s){var t=this;this.get("container").addClass("subnav-state-loading");l.setAccountCoverPhoto(s.photo.id,s.getCropValues(),function(){t.get("container").removeClass("subnav-state-loading");t._undo=null})},getView:function(t){var s;if(!this.views[t]){this.views[t]=s=new g[t]();s.onClose=c.bind(this.closeView,this,s);this.modalContainer.append(s.get("container"))}return this.views[t]},openView:function(t){if(!this.get("container").get("parentNode")){console.warn("PhotosSubnavView container is not attached to the DOM")}if(!this.modalContainer){this.modalContainer=c.Node.create("<div/>");this.modalContainer.addClass("subnav-tools");this.get("root").append(this.modalContainer)}if(!this.curtain){this.curtain=new n({rootEl:this.get("root"),onClose:c.bind(this.closeView,this),name:"subnav-curtain-modal"});this.modalContainer.append(this.curtain.el)}var s=this.getView(t);if(s.get("modal")){this.get("parallax")&&this.get("parallax").disable();this.curtain.show()}if(this.get("groupId")&&s.load){s.load(this.get("groupId"))}else{if(this.get("setId")&&s.load){s.load(this.get("setId"))}else{s.load&&s.load(this.get("userNSID"))}}return s},panic:function(){},closeView:function(s){var t=s?[s]:c.Object.values(this.views);c.Array.forEach(t,function(u){if(typeof u==="string"){u=this.getView(u)}u.hide()},this);this.get("parallax")&&this.get("parallax").enable();this.curtain&&this.curtain.hide()},initializer:function(){var s=this;if(a.isIE(8)){return}q.debug&&(window._Y=c,window._C=this);this.views={};l.init(c.merge({onFailure:this.panic},this.getAttrs()));j=c.merge(j,this.get("i18n")||{});c.one(document).on("keyup",function(t){if(t.keyCode===27){return s.closeView()}})},render:function(){var s=this.get("container");s.addClass("subnav-state-ready");s.one(".subnav-middle").append(this.get("templatePositionMask"));this._rendered=true}},{ATTRS:{visible:{value:true},root:{value:c.one(document.body)},templatePositionMask:{getter:function(){return c.one("#subnav-template-positionmask").getContent()}}}});function h(s){if(s.groupId){this.groupId=s.groupId}if(s.userNSID){this.userNSID=s.userNSID}h.superclass.constructor.apply(this,arguments)}c.GroupsSubnavView=c.extend(h,o,{events:{".change-photo":{click:a.setupHandler("showPicker")}},showPicker:function(){var t=this;var s=this.openView("groupCoverPhotoPicker");s.onSelect=function(v){t.closeView(s);t.get("container").addClass("subnav-state-loading");var u=new Image();u.onload=function(){t.get("container").removeClass("subnav-state-loading");t.positionCoverPhoto(v.photo)};u.src=v.photo.source}},saveCoverPhoto:function(s){var t=this;this.get("container").addClass("subnav-state-loading");l.setGroupCoverPhoto(this.get("groupId"),s.photo.id,s.getCropValues(),function(){t.get("container").removeClass("subnav-state-loading");t._undo=null})}});function i(s){if(s.setId){this.setId=s.setId}i.superclass.constructor.apply(this,arguments)}c.setSubnavView=c.extend(i,o,{showPicker:function(){var t=this;var s=this.openView("setCoverPhotoPicker");s.onSelect=function(v){t.closeView(s);t.get("container").addClass("subnav-state-loading");var u=new Image();u.onload=function(){t.get("container").removeClass("subnav-state-loading");t.positionCoverPhoto(v.photo)};u.src=v.photo.source}},saveCoverPhoto:function(s){var t=this;this.get("container").addClass("subnav-state-loading");l.setSetCoverPhoto(this.get("setId"),s.photo.id,s.getCropValues(),function(){t.get("container").removeClass("subnav-state-loading");t._undo=null})}});var g={};g.CoverPhotoPicker=c.Base.create("CoverPhotoPicker",c.View,[p],{events:{".button-upload":{click:a.setupHandler("_onUploadPhoto")},".subnav-view-close":{click:a.setupHandler("_onClose")},".photo_container":{click:a.setupHandler("selectCoverPhoto")}},load:function(t){var s=this;if(this._rendered[".subnav-io"]){return this.show()}this._pending={};this.switchToLoadingState();this.show();function w(x){c.templateFetcher.fetch("inc_choose_cover_photos",function(y){s.render(y(x),".subnav-io");s.switchToLoadingState(false)})}function u(x){a.log("Error calling flickr.people.getPhotos",x)}var v={user_id:t,safe_search:1,per_page:200,page:1};l.callMethod("flickr.people.getPhotos",v,l.handleResponse([null,null,null,w,u]))},selectCoverPhoto:function(v){var t=this;var w=v.currentTarget.one("img")||"";w&&(w=w.getAttribute("src")||"");if(this._pending.api){this._pending.api.abort();clearTimeout(this._pending.ack);this._pending.clicked.removeClass("selected");this.switchToLoadingState(false,this._pending.clicked)}this._pending={};var u=this._pending.clicked=v.currentTarget.ancestor(".photo-display-item",true);if(!u){return}var s=u.getData("photo-id");s||(s=(w.match(/\/(\d+)_/)||[])[1]||null);this.switchToLoadingState(true,u);this._pending.api=l.getPhotoSizes(s,function(z){var A={best:null,good:null,ok:null,original:null};try{c.Array.forEach(z.sizes.size,function(D){D.width=parseInt(D.width,10)||0;D.height=parseInt(D.height,10)||0;D.aspect=(D.width/D.height)>=1?"landscape":"portrait";if(D.label.toLowerCase()==="original"){A.original=D;A.original.rotated=false;return}if(!A.best&&D.width>=q.bestPhotoWidth&&D.height/D.width>=q.minHeightRatio){A.best=D}if(!A.good&&D.width>=q.minPhotoWidth){A.good=D}if(!A.ok&&D.width<q.minPhotoWidth){A.ok=D}})||null}catch(C){}if(!A.ok){return a.log("Problem with photo sizes",z,A)}var y=function(E){if(!E){return null}E.id=s;E.original=A.original||E;if(E.aspect!==E.original.aspect){var D=E.original.width;E.original.rotated=true;E.original.width=E.original.height;E.original.height=D}return E};var B=y(A.best||A.good);if(!B){t.switchToLoadingState(false,u);t._pending={};var x=new d({container:t.get("container"),show:true,messageText:j.lowres,confirmText:j.confirm,cancelText:j.cancel,onClose:function(D){if(!D.confirmed){return}u.addClass("selected");t._pending.ack=setTimeout(function(){B=y(A.ok);u.removeClass("selected");t._onSelect({photo:B})},600)}});return}t.switchToLoadingState(false,u);u.addClass("selected");t._pending.ack=setTimeout(function(){t._pending={};u.removeClass("selected");t._onSelect({photo:B})},600)})},switchToLoadingState:function(t,s){if(t===false){return(s||this.get("container")).removeClass("subnav-state-loading")}if(s){s.addClass("subnav-state-loading")}else{this.get("container").one(".subnav-io").getDOMNode().scrollTop=0;this.get("container").addClass("subnav-state-loading")}},_onUploadPhoto:function(s){this.switchToLoadingState();document.location="/photos/upload"},_onClose:function(s){this._pending.api&&this._pending.api.abort();this.switchToLoadingState(false);this.onClose&&this.onClose()},_onSelect:function(s){this.onSelect&&this.onSelect(s)}},{ATTRS:{visible:{value:false},modal:{value:true},cssClassName:{value:"subnav-container-photopicker"},template:{getter:function(){return c.one("#subnav-template-photopicker").getContent()}}}});function e(s){e.superclass.constructor.apply(this,arguments)}g.groupCoverPhotoPicker=c.extend(e,g.CoverPhotoPicker,{load:function(s){if(c.config.flickr.flags.enable_group_post_beta){this.loadPhotos(s)}else{this.loadPhotos()}if(c.one("#tab-photostream a")){c.one("#tab-photostream a").on("click",function(t){t.preventDefault();this.loadPhotos()},this)}if(c.one("#tab-group a")){c.one("#tab-group a").on("click",function(t){t.preventDefault();this.loadPhotos(s)},this)}},loadPhotos:function(t){var s=this;this._pending={};this.switchToLoadingState();this.show();function w(x){c.templateFetcher.fetch("inc_choose_cover_photos",function(y){s._rendered[".subnav-io"]=false;s.render(y(x),".subnav-io");s.switchToLoadingState(false)});if(c.one("#tabs")){if(t){c.one("#tab-photostream a").show();c.one("#tab-photostream span").hide();c.one("#tab-group span").show();c.one("#tab-group a").hide();c.one("#group-fail").hide();c.one("#photostream-fail").hide();if(!parseInt(x.photos.total,10)){c.one("#group-fail").show()}}else{c.one("#tab-photostream a").hide();c.one("#tab-photostream span").show();c.one("#tab-group span").hide();c.one("#tab-group a").show();c.one("#group-fail").hide();c.one("#photostream-fail").hide();if(!parseInt(x.photos.total,10)){c.one("#photostream-fail").show()}}}}function u(x){a.log("Error loading photos",x)}if(t){var v={group_id:t,safe_search:1,privacy_filter:1};l.callMethod("flickr.groups.pools.getPhotos",v,l.handleResponse([null,null,null,w,u]))}else{var v={user_id:"me",safe_search:1,privacy_filter:14,per_page:200,page:1};l.callMethod("flickr.people.getPhotos",v,l.handleResponse([null,null,null,w,u]))}}},{});function f(s){f.superclass.constructor.apply(this,arguments)}g.setCoverPhotoPicker=c.extend(f,g.CoverPhotoPicker,{load:function(s){var t=this;if(this._rendered[".subnav-io"]){return this.show()}this._pending={};this.switchToLoadingState();this.show();function w(x){var y={};y.photos=x.photoset;c.templateFetcher.fetch("inc_choose_cover_photos",function(z){t.render(z(y),".subnav-io");t.switchToLoadingState(false)})}function u(x){a.log("Error calling flickr.photosets.getPhotos",x)}var v={photoset_id:s};l.callMethod("flickr.photosets.getPhotos",v,l.handleResponse([null,null,null,w,u]))}},{});var d=function(t){this.visible=false;this.options=t||{};this.el=c.Node.create("<div/>");this.el.addClass("subnav-popup").addClass(t.cssClassName||"subnav-popup-generic");this.el.append(c.Node.create("<p/>").set("text",t.messageText));var s=c.Node.create("<div/>").addClass("sn-button-bar");s.append(c.Node.create("<div/>").addClass("sn-button").addClass("sn-button-confirm").set("text",t.confirmText||"Y"));s.append(c.Node.create("<div/>").addClass("sn-button").addClass("sn-button-cancel").set("text",t.cancelText||"N"));this.el.append(s);this.el.delegate("click",this.hide,".sn-button",this);this.el.hide();d._all||(d._all=[]);d._all.push(this);(this.options.container||c.one(document.body)).append(this.el);this.options.show&&this.show()};d.prototype={destroy:function(){this.el.remove(true);d._all.splice(c.Array.indexOf(d._all,this),1)},show:function(){if(this.visible){return}this.visible=true;this.el.show();a.delay(function(){this.el.addClass("subnav-popup-open")},0,this)},hide:function(s){if(!this.visible){return}this.visible=false;this.el.removeClass("subnav-popup-open");a.delay(function(){this.el.hide();this.destroy()},q.transitionDelay,this);this.options.onClose({target:s.currentTarget,confirmed:s.currentTarget.hasClass("sn-button-confirm")})}};var n=function(s){this.visible=false;this.options=s||{};this.el=c.Node.create("<div/>");this.el.addClass("subnav-curtain");this.options.onClose&&this.el.on("click",this.hide,this);this.el.hide()};n.prototype={show:function(){if(this.visible){return}this.visible=true;this.el.show();a.delay(function(){this.options.rootEl.addClass("subnav-modals")},0,this);a.disableScrolling()},hide:function(s){if(!this.visible){return}this.visible=false;this.options.rootEl.removeClass("subnav-modals");a.delay(function(){this.el.hide()},q.transitionDelay,this);s&&this.options.onClose();a.restoreScrolling()}}},"0.0.1",{requires:F.config.modules["photos-subnav-view"].requires||[],optional:F.config.modules["photos-subnav-view"].optional||[]});function udm_(J){var I="comScore=",H=document,G=H.cookie,F="",E="indexOf",D="substring",C="length",B=2048,A,z="&ns_",y="&",x,w,v,u,t=window,s=t.encodeURIComponent||escape;if(G[E](I)+1){for(v=0,w=G.split(";"),u=w[C];v<u;v++){x=w[v][E](I),x+1&&(F=y+unescape(w[v][D](x+I[C])))}}J+=z+"_t="+ +(new Date)+z+"c="+(H.characterSet||H.defaultCharset||"")+F,J[C]>B&&J[E](y)>0&&(A=J[D](0,B-8).lastIndexOf(y),J=(J[D](0,A)+z+"cut="+s(J[D](A+1)))[D](0,B)),H.images?(x=new Image,t.ns_p||(ns_p=x),x.src=J):H.write("<","p","><",'img src="',J,'" height="1" width="1" alt="*"',"><","/p",">")}typeof _comscore=="undefined"&&(_comscore=[]),function(){var v="length",u=self,t=u.encodeURIComponent?encodeURIComponent:escape,s=".scorecardresearch.com",r=Math,q="script",p="width",o=/c2=(\d*)&/,n,m=function(D){if(!!D){var C,B=[],A,z=0,y,x,w="";for(var d in D){A=typeof D[d];if(A=="string"||A=="number"){B[B[v]]=d+"="+t(D[d]),d=="c2"?w=D[d]:d=="c1"&&(z=1)}}if(B[v]<=0||w==""){return}x=D.options||{},x.d=x.d||document;if(typeof x.url_append=="string"){y=x.url_append.replace(/&amp;/,"&").split("&");for(var d=0,c=y[v],a;d<c;d++){a=y[d].split("="),a[v]==2&&(B[B[v]]=a[0]+"="+t(a[1]))}}C=["http",x.d.URL.charAt(4)=="s"?"s://sb":"://b",s,"/p?",z?"":"c1=2&",B.join("&").replace(/&$/,"")],udm_(C.join(""))}},l=function(a){a=a||_comscore;for(var f=0,e=a[v];f<e;f++){m(a[f])}a=_comscore=[]};l(),(n=u.COMSCORE)?(n.purge=l,n.beacon=m):COMSCORE={purge:l,beacon:m}}();